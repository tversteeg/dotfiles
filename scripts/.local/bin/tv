#!/bin/bash

if [[ $# -ne 1 ]]; then
	echo 'Too many/few arguments, expecting "start" or "stop"' >&2
	exit 1
fi

case $1 in
	start)
		swaymsg output HDMI-A-2 enable
		swaymsg focus output HDMI-A-2
		chromium --app-id=akkheaabpnkfhcaebdhneikfekamanod --start-fullscreen --ozone-platform-hint=auto &
		echo "$!" > /tmp/jellyfin-chromium.pid
		;;
	stop)
		kill -15 "$(cat /tmp/jellyfin-chromium.pid)"
		killall chromium
		swaymsg output HDMI-A-2 disable
		;;
	*)
		echo 'Expected "start" or "stop"' >&2
		exit 1
esac
